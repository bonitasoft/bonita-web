{"designerVersion":"1.0.0-M18","id":"customRestApiCall","name":"restApiCall","lastUpdate":1433167558747,"template":"<hr>\n<div ng-show=\"properties.method\" ng-init=\"ctrl.initData()\">\n    <h3>{{properties.description}}</h3>\n\n    <p>{{properties.method}} | ../API/extension/{{properties.pathTemplate}}\n        <span ng-show=\"properties.queryString\">?<input size=\"50\" type=\"text\" ng-show=\"properties.queryString\" ng-model=\"properties.queryString\"></span>\n    \n    <p ng-show=\"properties.method=='POST'\">json POST payload:<br/>\n        <textarea  ng-model=\"postPayload\" style=\"width: 300px;height: 120px\"></textarea>\n    </p>\n    \n    <p>\n        <input type=\"submit\" class=\"btn btn-primary\" ng-click=\"ctrl.callApi()\">\n        <input type=\"button\" class=\"btn btn-primary\" ng-click=\"ctrl.clear()\" value=\"Clear\">\n    </p>\n    <div ng-show=\"response\">\n   \n        <p>status:</p>\n        <pre>{{response.respStatus}}</pre>\n        <p>returned data:</p>\n        <pre>{{response.respData}}</pre>\n        <p ng-show=\"response.respHeaders\">headers:</p>\n        <pre ng-show=\"response.respHeaders\">{{response.respHeaders}}</pre>\n\n    </div>\n    \n    \n</div>","controller":"function WidgetrestApiCallController($scope,$http) {\n    \n    this.initData= function(){\n     $scope.postPayload='{\\n\"param1\":\"abc\",\\n\"param2\":123,\\n\"param3\":true\\n}';\n     $http({method:  'GET',url: '/bonita/API/system/session/1'})\n            .success(function (data, status, headers, config) {\n                $scope.apiToken= headers('X-Bonita-API-Token');\n            });\n    }\n    \n    this.callApi = function() {\n         $scope.response={};\n         \n         var apiUrl= '/bonita/API/extension/' + $scope.properties.pathTemplate;\n         if ($scope.properties.queryString){\n             apiUrl+= \"?\"+ $scope.properties.queryString ;\n         }\n         \n         $http({method:  $scope.properties.method, url: apiUrl, data: $scope.postPayload, headers:{'X-Bonita-API-Token':$scope.apiToken} })\n            .success(function (data, status, headers, config) {\n                $scope.response.respData = data;\n                $scope.response.respStatus = status;\n                $scope.response.respHeaders = headers('awesome header');\n            })\n            .error(function (data, status, headers, config) {\n                $scope.response.respData = data;\n                $scope.response.respStatus = status;\n            });\n        \n    };\n    \n     this.clear = function() {\n                $scope.response = null;\n                \n    };\n        \n    \n    \n}","custom":true,"properties":[{"label":"Method","name":"method","type":"text","defaultValue":"GET","bidirectional":false},{"label":"Path Template","name":"pathTemplate","type":"text","defaultValue":"demo/getExample","bidirectional":false},{"label":"Description","name":"description","type":"text","defaultValue":"Description","bidirectional":false},{"label":"Additionnal query string parameter ?","name":"queryString","type":"text","bidirectional":false}],"assets":[]}